dev.off()
plt_act = Heatmap(
test_act,
col = circlize::colorRamp2(breaks = c(-5, -1, 5), colors = c("#c2d3d6", "#dddddd", d2_color)),
na_col = "white",
column_title = "Activation",
row_names_side = "left",
row_title = NULL,
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Activation")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_activation.pdf", width = 10, height = 8)
draw(plt_act)
plt_rep = Heatmap(
test_rep,
col = circlize::colorRamp2(breaks = c(-5, 1, 5), colors = c(d5_color, "#dddddd", "#dbd7af")),
na_col = "white",
column_title = "Repression",
row_names_side = "left",
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Repression")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_repression.pdf", width = 10, height = 8)
draw(plt_rep)
plt = plt_act + plt_rep
cairo_pdf("./activators_vs_repressors_heatmap.pdf", width = 20, height = 8)
draw(plt)
dev.off()
plt_act = Heatmap(
test_act,
col = circlize::colorRamp2(breaks = c(-5, -1, 5), colors = c("#c2d3d6", "#dddddd", d2_color)),
na_col = "white",
column_title = "Activation",
row_names_side = "left",
row_title = NULL,
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Activation")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_activation.pdf", width = 10, height = 8)
draw(plt_act)
dev.off()
plt_rep = Heatmap(
test_rep,
col = circlize::colorRamp2(breaks = c(-5, 1, 5), colors = c(d5_color, "#dddddd", "#dbd7af")),
na_col = "white",
column_title = "Repression",
row_names_side = "left",
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Repression")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_repression.pdf", width = 10, height = 8)
draw(plt_rep)
plt = plt_act + plt_rep
cairo_pdf("./activators_vs_repressors_heatmap.pdf", width = 20, height = 8)
draw(plt)
dev.off()
plt_act = Heatmap(
test_act,
col = circlize::colorRamp2(breaks = c(-5, -1, 5), colors = c("#c2d3d6", "#dddddd", d2_color)),
na_col = "white",
column_title = "Activation",
row_names_side = "left",
row_title = NULL,
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Activation")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_activation.pdf", width = 10, height = 8)
draw(plt_act)
dev.off()
plt_rep = Heatmap(
test_rep,
col = circlize::colorRamp2(breaks = c(-5, 1, 5), colors = c(d5_color, "#dddddd", "#dbd7af")),
na_col = "white",
column_title = "Repression",
row_names_side = "left",
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Repression")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_repression.pdf", width = 10, height = 8)
draw(plt_rep)
dev.off()
plt = plt_act + plt_rep
cairo_pdf("./activators_vs_repressors_heatmap.pdf", width = 20, height = 8)
draw(plt)
dev.off()
plt_act = Heatmap(
test_act,
col = circlize::colorRamp2(breaks = c(-5, -1, 5), colors = c("#c2d3d6", "#dddddd", d2_color)),
na_col = "white",
column_title = "Activation",
row_names_side = "left",
# row_title = NULL,
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Activation")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_activation.pdf", width = 10, height = 8)
draw(plt_act)
dev.off()
plt_rep = Heatmap(
test_rep,
col = circlize::colorRamp2(breaks = c(-5, 1, 5), colors = c(d5_color, "#dddddd", "#dbd7af")),
na_col = "white",
column_title = "Repression",
row_names_side = "left",
cluster_rows = FALSE,
cluster_columns = FALSE,
row_split = c(rep("Activator", 30), rep("Control",2)),
column_split = c(rep("Repressor", 42), rep("Control", 2)),
heatmap_legend_param = list(title = bquote(log[2] ~ "(ON:OFF), Repression")),
height = 7.6158,
width = 9
)
cairo_pdf("./a_v_r_repression.pdf", width = 10, height = 8)
draw(plt_rep)
dev.off()
plt = plt_act + plt_rep
cairo_pdf("./activators_vs_repressors_heatmap.pdf", width = 20, height = 8)
draw(plt)
dev.off()
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = dirname(rstudioapi::getSourceEditorContext()$path))
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
getwd()
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
colorblind_palette = c("#000000", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
library(tidyverse)
library(ggplot2)
library(stringr)
library(hrbrthemes)
library(tidyverse)
library(cowplot)
library(deSolve)
library(data.table)
library(patchwork)
library(comprehenr)
library(tidyr)
library(ggthemes)
library(ggeasy)
library(dplyr)
library(viridis)
library(gtable)
library(corrr)
library(ggsignif)
library(ggforce)
library(rlist)
library(ggridges)
library(ggHoriPlot)
library(latex2exp)
library(ggrepel)
library(interp)
library(ggpubr)
library(scico)
library(fitdistrplus)
library(colorspace)
library(biclust)
library(heatmaply)
library(webshot)
library(dendextend)
library(gplots)
library(ComplexHeatmap)
library(circlize)
webshot::install_phantomjs()
df = readr::read_csv('../2021.12.27_import_testing/all_lakers_possessions_20211228.csv')
df
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type),
names_to = event_number,
names_pattern = "event([0-9][0-9])_type",
) -> t
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type),
names_to = "event_number",
names_pattern = "event([0-9][0-9])_type",
) -> t
t
View(t)
View(t)
View(df)
View(df)
df[, colSums(is.na(df)) != nrow(df)]
df = readr::read_csv('../2021.12.27_import_testing/all_lakers_possessions_20211228.csv')
df = df[, colSums(is.na(df)) != nrow(df)]
names(df)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type),
names_to = "event_number",
names_pattern = "event([0-9][0-9])_type",
) -> t
View(t)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type),
names_to = "event_number",
names_prefix = "event([0-9][0-9])_type"
) -> t
names(t)
names(df)
df = readr::read_csv('../2021.12.27_import_testing/all_lakers_possessions_20211228.csv')
df = df[, colSums(is.na(df)) != nrow(df)]
names(df)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type),
names_to = "event_number",
names_prefix = "event([0-9][0-9])_type"
) -> t
names(t)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) -> t
names(t)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") -> t
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") -> t
names(t)
t
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") -> edf
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") -> edf
edf %>%
dplyr::filter((event_number_y != event_number_t) | (event_number_t != event_number_p)) -> t
t
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") %>%
dplyr::mutate(event_number = event_number_y) %>%
dplyr::select(-c(event_number_y, event_number_t, event_number_p)) -> edf
edf
names(edf)
View(edf)
View(edf)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") %>%
dplyr::mutate(event_number = event_number_y) %>%
dplyr::select(-c(event_number_y, event_number_t, event_number_p)) %>%
dplyr::distinct() -> edf
edf
View(edf)
edf %>% dplyr::filter(event_player != NA)
edf %>% dplyr::filter(!is.na(event_player))
edf %>% dplyr::filter(is.na(event_player))
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") %>%
dplyr::mutate(event_number = event_number_y) %>%
dplyr::select(-c(event_number_y, event_number_t, event_number_p)) %>%
dplyr::distinct() %>%
tidyr::drop_na(event_player) -> edf
edf
View(edf)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") %>%
dplyr::mutate(event_number = event_number_y) %>%
dplyr::select(-c(event_number_y, event_number_t, event_number_p)) %>%
dplyr::distinct() %>%
tidyr::drop_na(any_of(event_player, event_time, event_type)) -> edf
View(edf)
df %>%
tidyr::pivot_longer(
cols = c(event00_type, event01_type, event02_type, event03_type, event04_type,
event05_type, event06_type, event07_type, event08_type, event09_type,
event10_type, event11_type),
names_to = "event_number_y",
names_prefix = "event([0-9][0-9])_type",
values_to = "event_type"
) %>%
tidyr::pivot_longer(
cols = c(event00_time, event01_time, event02_time, event03_time, event04_time,
event05_time, event06_time, event07_time, event08_time, event09_time,
event10_time, event11_time),
names_to = "event_number_t",
names_prefix = "event([0-9][0-9])_time",
values_to = "event_time"
) %>%
tidyr::pivot_longer(
cols = c(event00_player, event01_player, event02_player, event03_player, event04_player,
event05_player, event06_player, event07_player, event08_player, event09_player,
event10_player, event11_player),
names_to = "event_number_p",
names_prefix = "event([0-9][0-9])_player",
values_to = "event_player") %>%
dplyr::mutate(event_number = event_number_y) %>%
dplyr::select(-c(event_number_y, event_number_t, event_number_p)) %>%
dplyr::distinct() %>%
tidyr::drop_na(any_of(event_player, event_time, event_type)) -> edf
edf
